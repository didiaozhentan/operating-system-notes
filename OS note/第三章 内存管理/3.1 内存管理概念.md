# 3.1.1 内存的基础知识
内存的主要功能：
- *内存空间的分配与回收*：由操作系统负责内存空间的分配和管理，记录内存的空闲空间、内存的分配情况，并回收已结束进程所占用的内存空间。
- *地址转换*：程序的逻辑地址与内存中的物理地址不可能一致，因此存储管理必须提供地址变换功能，将逻辑地址转换成相应的物理地址。
- 内存空间的扩充：利用虚拟存储技术从逻辑上扩充内存。
- *内存共享*：指允许多个进程访问内存的同一部分。例如，多个合作进程可能需要访问同一块数据，因此必须支持对内存共享区域进行受控访问。
- *存储保护*：保证各个进程在各自的存储空间内运行，互不干扰。

逻辑地址和物理地址：
操作系统通过内存管理部件(MMU)将进程使用的逻辑地址转换为物理地址。进程使用虚拟内存空间中的地址，操作系统在相关硬件的协助下，将它“转换”成真正的物理地址。逻辑地址通过页表映射到物理内存，页表由操作系统维护并被处理器引用。

从写程序到程序运行：*编辑-编译-链接-装入*
![[Pasted image 20250505212136.png]]
三种链接方式：
- *静态链接*（在程序运行前，先将各目标模块及它们所需的库函数连接成一个完整的可执行文件）
- *装入时动态链接*（将各目标模块装入内存时，边装入边链接的链接方式）
- *运行时动态链接*（在程序执行中需要该模块时，才对它进行链接，其优点时便于修改和更新）

三种装入方式：
- *绝对装入*（在编译的时候就知道程序放在内存的哪个位置）
- *静态重定位*（装入时将逻辑地址转表为物理地址）
- *动态重定位*（把地址转化推迟到程序真正要执行时才进行）

![[Pasted image 20250505212209.png]]
# 3.1.2 连续分配管理方式

## 单一分配方式
 内存被分为系统区和用户区
 优点：无外部碎片，不需要内存保护
 缺点：仅用于单用户单人物，有内部碎片，内存利用率极低
## 固定分区分配
内存划分为若干固定大小的分区，每个分区只装入一道作业
- 分区大小相等。程序太小会造成浪费，程序太大又无法装入，缺乏灵活性
- 分区大小不等。划分为多个较小的分区、适量的中等分区和少量大分区。

缺点：
- 程序太大而放不进任何一个分区
- 当程序小于固定分区大小时,也要占用一个完整的内存分区，这样分区内部就存在空间浪费，这种现象称为内部碎片。固定分区方式无外部碎片，但不能实现多进程共享一个主存区，所以内存的利用率低。
## 动态分区分配
### 动态分区的基本原理
动态分区分配也称可变分区分配，是指在进程装入内存时，根据进程的实际需要，*动态*地为之分配内存，并使分区的大小正好适合进程的需要。因此，系统中分区的大小和数量是可变的。

动态分区在开始时是很好的，但是随着时间的推移，内存中会产生越来越多的小内存块，内存的利用率也随之下降。这些小内存块被称为*外部碎片*，它存在于所有分区的外部，与固定分区中的内部碎片正好相对。
![[Pasted image 20250505213413.png]]
### 动态分区的分配方法