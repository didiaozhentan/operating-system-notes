# 第一章 大数据概述
## 三次信息化浪潮
| 信息化浪潮 | 发生时间    | 标志          | 解决的问题 | 代表企业                                                 |
| ----- | ------- | ----------- | ----- | ---------------------------------------------------- |
| 第一次浪潮 | 1980年前后 | 个人计算机       | 信息处理  | Intel、AMD、IBM、苹果、微软、联想、戴尔、惠普等                        |
| 第二次浪潮 | 1995年前后 | 互联网         | 信息传输  | 雅虎、谷歌、阿里巴巴、百度、腾讯等                                    |
| 第三次浪潮 | 2010年前后 | 物联网、云计算和大数据 | 信息爆炸  | 亚马逊、谷歌、IBM、VMWare、Palantir、Hortonworks、Cloudera、阿里云等 |
## 人类社会数据产生的三个阶段
### 运营式系统阶段
- 数据库的出现使数据管理的复杂度大大降低，数据往往伴随着一定的运营活动而产生并记录在数据库中，数据的产生方式是被动的
### 用户原创内容阶段
- 数据爆发产生于Web2.0时代，而Wed2.0时代的最重要标志就是用户原创内容 
- 智能手机等移动设备加速内容产生
- 数据产生方式是主动的
### 感知式系统阶段
- 感知式系统的广泛使用
- 人类社会数据量第三次大的飞升最终导致了大数据的产生

## 大数据的三个发展阶段
### 第一阶段：萌芽期
时间：20世纪90年代至21世纪初
内容：商业智能工具和知识管理技术开始应用，如数据仓库，专家系统，知识管理系统
### 第二阶段：成熟期
时间：21世纪前10年
内容：web2.0发展，大数据技术突破，GFS和MapReduce技术收到追捧，Hadoop平台开始大行其道
### 第三阶段：大规模应用期
时间：2010年后
内容：大数据应用渗透各行各业，数据驱动决策，信息社会智能化程度大幅度提高

## 大数据4V概念
### 1.数据量搭
### 2.数据类型繁多
### 3.处理速度快
### 4.价值密度低

## 大数据对科学研究的影响
### 1.实验科学
### 2.理论科学
### 3.计算科学
### 4.数据密集型科学

## 大数据对思维方式的影响
### 全样而非抽样
### 效率而非精准
### 相关而非因果

## 大数据技术的不同层面机器功能
### 数据采集与预处理层面
### 数据存储和管理层面
### 数据处理和分析层面
### 数据安全和隐私保护层面
## 大数据计算模式以及其代表产品
| 大数据计算模式 | 解决问题            | 代表产品                                                       |
| ------- | --------------- | ---------------------------------------------------------- |
| 批处理计算   | 针对大规模数据的批量处理    | MapReduce、Spark 等                                          |
| 流计算     | 针对流数据的实时计算      | Storm、S4、Flume、Streams、Puma、DStream、Super Mario、银河流数据处理平台等 |
| 图计算     | 针对大规模图结构数据的处理   | Pregel、GraphX、Giraph、PowerGraph、Hama、GoldenOrb 等           |
| 查询分析计算  | 大规模数据的存储管理和查询分析 | Dremel、Hive、Cassandra、Impala 等                             |
## 大数据产业的六个层次
### IT基础设施层
### 数据源层
### 数据管理层
### 数据分析层
### 数据平台层
### 数据应用层

## 大数据与云计算、物联网
### 云计算的三种典型服务模型
- Iaas（基础设施即服务）
- Paas（平台即服务）
- Saas（软件即服务）
### 云计算的三种方式
- 公有云
- 私有云
- 混合云
### 云计算的关键技术
- 虚拟化
- 分布式存储
- 分布式计算
- 多租户

## 物联网体系架构
1. **感知层**：
    这一层负责数据的采集和感知。它包括各种传感器和设备，如RFID标签和读写器、M2M终端、导航定位设备、二维码标签、传感器和摄像头等。这些设备负责收集环境中的数据，并将其传输到网络层。
2. **网络层**
	网络层负责数据的传输和通信。它包括不同类型的网络，如电信网、互联网、广电网、电网、专用网和其他网络。这些网络确保数据能够从感知层传输到处理层。
3. **处理层**：
    处理层是物联网的中间件平台，负责数据的处理和管理。它包括服务支撑平台、网络管理平台、信息处理平台和信息安全平台。这些平台确保数据的高效处理和安全传输。
4. **应用层**：
	 应用层是物联网的最终用户界面，它将处理后的数据应用于各种智能系统中。这一层包括智能交通、智能电网、智慧农业、智能工业、智能家居和智慧医疗等应用。

## 大数据与云计算、物联网的关系
![[Pasted image 20250531190118.png]]

# 第二章 大数据处理架构Hadoop
## Hadoop的特性
- 搞可靠性
- 高效性
- 高可拓展性
- 高容错性
- 成本低
- 运行在Linux上
- 支持多种编程语言

## Hadoop生态系统
### AHmbari 
安装、部署、配置和管理工具
### Hive 
数据仓库
### Pig
数据流处理
### Mahout
数据挖掘库
### Zookeeper
分布式协作服务
### Hbase
分布式数据库
### MapReduce
分布式计算框架
### YARN
资源调度和管理框架
### Flume
日志收集
### Sqoop
数据库ETL
### HDFS
分布式文件系统

# 第三章 分布式文件系统HDFS
## 分布式文件系统的结构
分布式文件系统在物理结构上是由计算机集群中的多个节点构成，一类叫*主节点*，或者称为*名称节点*；另一类叫*从节点*，也被称为*数据节点*。
名称节点负责文件和目录的创建，删除和重命名等。
数据节点负责数据的存储和读取。

##  HDFS要实现的目标
- 兼容廉价的硬件设备
- 流数据读写
- 大数据集
- 简单的文件模型
- 强大的跨平台兼容性
- 不适合点延迟数据访问
- 无法高效存储大量小文件
- 不支持多用户写入/修改文件

## HDFS的相关概念
### 块
默认块的大小是64mb
采用抽象的块的好处：
- 支持大规模文件存储
- 简化系统设计
- 适合数据备份

### 名称节点和数据节点
- 名称节点负责管理分布式文件系统的命名空间，保存了两个核心的数据结构，即Fslmage和EditLog
- 数据节点是分布式文件系统HDFS的工作节点，负责数据的存储和读取，会工具客户端或者名称节点的调度来继续数据的存储和检索，并向名称节点定期发送自己所存储的块的列表

## HDFS体系结构
### 概述
HDFSA采用的是主从结构模型，一个集群包括一个名称节点和若干个数据节点

### HDFS体系的局限性
- 命名空间的限制
- 性能的瓶颈
- 隔离问题
- 集群的可用性

## HDFS的存储原理
### 存储方式
都副本方式对数据进行冗余存储，默认的冗余复制因子是3

### 数据错误与恢复
- 名称节点出错
- 数据节点出错
- 数据出错
## 数据读写过程
### 读数据的过程
![[Pasted image 20250531205923.png]]

### 写数据的过程
![[Pasted image 20250531205935.png]]

# 第四章 分布式数据库HBase
## 概述
### 特性
- 支持大规模海量数据
- 分布式并发数据处理效率极高
- 易于扩展且支持动态伸缩
- 适用于廉价设备
- 适合读操作而不适合写操作
### 底层技术对照表
| 项目       | 文件存储系统 | 海量数据处理          | 协同服务管理    |
| -------- | ------ | --------------- | --------- |
| BigTable | GFS    | MapReduce       | Chubby    |
| HBase    | HDFS   | HadoopMapReduce | ZooKeeper |
### HBase与传统数据库对比
HBase与传统数据库的主要区别包括：
1. **数据类型**：传统数据库采用关系模型，支持丰富的数据类型；HBase使用简单的数据模型，以字符串形式存储数据。
2. **数据操作**：传统数据库支持复杂的操作和多表连接；HBase操作简单，不支持表间接。
3. **存储模式**：传统数据库基于行存储，可能浪费存储空间；HBase基于列存储，降低I/O开销，支持高并发查询。
4. **数据索引**：传统数据库支持多索引；HBase仅有行键索引，但可通过HadoopMapReduce生成索引。
5. **数据维护**：传统数据库更新操作覆盖旧值；HBase保留旧版本，生成新版本。
6. **可伸缩性**：传统数据库扩展性有限；HBase支持灵活的水平扩展。
HBase的局限性在于不支持事务，无法实现跨行原子性。

## HBase数据模型
### 核心概念：
1. **表**：HBase中数据的组织形式，由行和列组成，列被划分为多个列族。
2. **行**：HBase表中的行由行键标识，行键是任意字符串，内部存储为字节数组，数据按行键字典序排序。
3. **列族**：表的基本访问控制单元，创建表时定义，数量有限，列族内数据通常同类型，有助于压缩。列族在访问控制、磁盘和内存使用上是独立管理的。
4. **列限定符**：用于定位列族中的数据，无需预定义，无数据类型，视为字节数组。
5. **单元格**：由行、列族和列限定符确定，存储的数据视为字节数组，可保存数据的多个版本。
6. **时间戳**：每个单元格的数据版本用时间戳索引，记录数据操作的时间。
这些概念共同构成了HBase的数据模型，支持高效的数据存储和访问。

## HBase实现原理
### 主要的三个组件
库函数，链接到每个客户端，master主服务器，多个region服务器
### region的定位HBase的三层结构
![[Pasted image 20250531220401.png]]

## HBase的系统架构

1. **客户端**：
   - 提供访问HBase的接口。
   - 缓存访问过的Region位置信息以加快访问速度。
   - 通过RPC与Master和Region服务器通信。

2. **Zookeeper服务器**：
   - 提供集群管理功能，监控Region服务器状态。
   - 帮助选举Master，避免单点故障。
   - 存储-ROOT-表地址、Master地址和HBase模式信息。

3. **Master主服务器**：
   - 管理表和Region，处理增加、删除、修改、查询操作。
   - 实现Region服务器间的负载均衡。
   - 负责Region的分裂、合并和故障迁移。
   - 维护Region服务器列表和Region分配信息。

4. **Region服务器**：
   - 负责维护分配给自己的Region，响应读写请求。
   - 通常使用HDFS作为底层存储，也可使用其他文件系统。
   - 处理数据存储和检索，与HDFS交互以读写数据。

# 第五章 NoSQL数据库
## NoSQL的含义
是一种不同于关系数据库的数据库管理系统设计方式，是对非关系型数据库的统称，它所采用的数据模型并非传统关系数据库的关系模型，而是类似键值，列族，文档等非关系模型

## NoSQL数据库的特点
- 灵活的可拓展性
- 灵活的数据模型
- 与云计算紧密融合

## 关系数据库的局限性
- 无法满足海量数据的管理需求
- 无法满足数据高并发的需求
- 无法满足高可扩展性和高可用性的需求

## 关系数据库的优势
- 以完善的关系代数理论为基础
- 支持ACID四性
- 借助索引机制可以实现高效的查询
- 技术成熟

## 关系数据库的劣势
- 可扩展性差
- 无法较好的支持海量数据存储
- 数据模型过于死板
- 事务机制影响了系统整体性能

## NoSQL的优势
- 可以支持超大数据存储
- 灵活的数据模型可以很好的支持web2.0应用
- 具有强大的横向扩展能力

## NoSQL的劣势
- 缺乏数学理论基础
- 复杂查询性能不高
- 不能实现事务强以指向
- 很难实现数据完整性

## NoSQL的四大类型
### 键值数据库

| 项目   | 描述                                                                                                                                                |
| ---- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| 相关产品 | Redis、Riak、SimpleDB、Cordless、Scalaris、Memcached                                                                                                   |
| 数据模型 | 键/值对                                                                                                                                              |
| 典型应用 | 内容缓存，如会话、配置文件、参数、购物车等                                                                                                                             |
| 优点   | 扩展性好、灵活性好、大量写操作时性能高                                                                                                                               |
| 缺点   | 无法存储结构化信息、条件查询效率较低                                                                                                                                |
| 使用者  | 百度云数据库（Redis）、GitHub（Riak）、BestBuy（Riak）、Twitter（Redis 和 Memcached）、StackOverflow（Redis）、Instagram（Redis）、Youtube（Memcached）、Wikipedia（Memcached） |
### 列族数据库

| 项目   | 描述                                                                                                              |
| ---- | --------------------------------------------------------------------------------------------------------------- |
| 相关产品 | BigTable、HBase、Cassandra、HadoopDB、GreenPlum、PNUTS                                                               |
| 数据模型 | 列族                                                                                                              |
| 典型应用 | 分布式数据存储与管理                                                                                                      |
| 优点   | 查找速度快、可扩展性强、容易进行分布式扩展、复杂性低                                                                                      |
| 缺点   | 功能较少，大都不支持强事务一致性                                                                                                |
| 使用者  | Ebay（Cassandra）、Instagram（Cassandra）、NASA（Cassandra）、Twitter（Cassandra and HBase）、Facebook（HBase）、Yahoo!（HBase） |
### 文档数据库
| 项目   | 描述                                                                                     |
| ---- | -------------------------------------------------------------------------------------- |
| 相关产品 | CouchDB、MongoDB、Terrastor、ThruDB、RavenDB、SisoDB、RaptorDB、CloudKit、Persevere、Jackrabbit |
| 数据模型 | 版本化的文档                                                                                 |
| 典型应用 | 存储、索引并管理面向文档的数据或者类似的半结构化数据                                                             |
| 优点   | 性能好、灵活性高、复杂性低、数据结构灵活                                                                   |
| 缺点   | 缺乏统一的查询语法                                                                              |
| 使用者  | 百度云数据库（MongoDB）、SAP（MongoDB）、Codecademy（MongoDB）、Foursquare（MongoDB）、NBC News（RavenDB） |
### 图数据库
| 项目   | 描述                                             |
| ---- | ---------------------------------------------- |
| 相关产品 | Neo4J、OrientDB、InfoGrid、Infinite Graph、GraphDB |
| 数据模型 | 图结构                                            |
| 典型应用 | 应用于大量复杂、互连接、低结构化的图结构场合，如社交网络、推荐系统等             |
| 优点   | 灵活性高、支持复杂的图算法、可用于构建复杂的关系图谱                     |
| 缺点   | 复杂性高、只能支持一定的数据规模                               |
| 使用者  | Adobe（Neo4J）、Cisco（Neo4J）、T-Mobile（Neo4J）      |


## NoSQL的三大基石
- CAP（一致性、可用性、分区容忍性）  
- BASE（基本可用、软状态、最终一致性）  
- 最终一致性（因果一致性、“读己之所写”、会话一致性、单调读一致性、单调写一致性）

# 第六章 云数据库
## 云数据库/云计算的概念
云计算是分布式计算，并行计算，效用计算，网络存储等计算机和网络技术发展融合的产物。
云数据库是部署和虚拟化在云计算环境中的数据库。云数据库是在云计算的大背景下发展起来的一种新兴的共享基础架构的方法，具有高可扩展性、高可用性、采用多租形式和支持资源有效分发等特点。
## 云数据库的影响
- 满足大企业的海量数据存储需求
- 满足中小企业的低成本数据存储需求
- 满足企业动态变化的数据存储需求
## UMP系统的功能
- 对用户透明
- 读写分离
- 分库分表
- 资源管理/调度/隔离
- 数据安全
## UMP系统两种实现资源隔离的方法
| 资源隔离方式                     | 应用场合                     | 实现方式                                                                 |
|----------------------------------|------------------------------|--------------------------------------------------------------------------|
| 用 Cgroup 限制 MySQL 进程资源    | 多个 SQL 实例共享一台物理机  | 可以对用户的 MySQL 进程最大可以使用的 CPU 使用量、内存和 IOPS 等进行限制 |
| 在 Proxy 服务器端限制 QPS        | 多个用户共享同一个 MySQL 实例| Controller 服务器监测用户的实例资源消耗情况，如果明显超过配额，通知 Proxy 服务器通过增加延迟的方法去限制用户的 QPS，以减少用户对系统资源的消耗 |

# 第七章 MapReduce
## MapReduce的工作流程
![[Pasted image 20250603123222.png]]
## Map函数和Reduce函数的输入输出以及处理过程
### Map函数：
输入分为分布式文件系统的文件块，文件块的格式是任意的。map函数将输入的元素转化为<key,value>形式的键值对，键和值的类型也是任意的。
### Reduce函数：
输入是map函数输出的结果（也即中间结果），其任务是将输入的一系列具有相同键的键值对以某种方式组合起来，输出处理好的键值对，输出结果会合并成一个文件。
